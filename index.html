<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>原神性格测试</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #0d1b2a 0%, #1b263b 50%, #415a77 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-y: auto;
            position: relative;
            padding: 20px;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 40%);
            pointer-events: none;
            z-index: 1;
        }

        body.centered {
            align-items: center;
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 215, 0, 0.6);
            border-radius: 50%;
            animation: float 8s infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .container {
            text-align: center;
            z-index: 10;
            padding: 40px;
            width: 100%;
            max-width: 800px;
            position: relative;
        }

        .title {
            font-size: 3rem;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
            margin-bottom: 20px;
            letter-spacing: 4px;
            position: relative;
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
            animation: titleGlow 3s ease-in-out infinite;
        }
        
        .title::after {
            content: '原神性格测试';
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: blur(20px);
            opacity: 0.5;
            z-index: -1;
        }

        @keyframes titleGlow {
            0%, 100% {
                filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
            }
            50% {
                filter: drop-shadow(0 0 40px rgba(255, 215, 0, 0.8)) drop-shadow(0 0 60px rgba(255, 215, 0, 0.4));
            }
        }

        .subtitle {
            font-size: 1.2rem;
            color: #e6e6fa;
            margin-bottom: 60px;
            opacity: 0.9;
        }

        .start-btn {
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            border: none;
            padding: 18px 60px;
            font-size: 1.3rem;
            font-weight: bold;
            color: #1a1a2e;
            cursor: pointer;
            border-radius: 50px;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4),
                        inset 0 2px 4px rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
        }

        .start-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }

        .start-btn:hover::before {
            left: 100%;
        }

        .start-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 215, 0, 0.6),
                        inset 0 2px 4px rgba(255, 255, 255, 0.3);
        }

        .start-btn:active {
            transform: translateY(-2px) scale(1.02);
        }

        .decoration {
            position: fixed;
            width: 200px;
            height: 200px;
            border: 2px solid rgba(255, 215, 0, 0.2);
            border-radius: 50%;
            animation: rotate 20s linear infinite;
            z-index: 0;
            pointer-events: none;
        }

        .decoration:nth-child(1) {
            top: -100px;
            left: -100px;
        }

        .decoration:nth-child(2) {
            bottom: -100px;
            right: -100px;
            animation-direction: reverse;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        .quiz-container {
            display: none;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 40px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ff8c00, #ffd700);
            background-size: 200% 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
            animation: shimmer 2s linear infinite;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }

        .quiz-header {
            margin-bottom: 20px;
        }

        .question-number {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.1rem;
            margin-bottom: 10px;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .encouragement-text {
            color: rgba(255, 215, 0, 0.8);
            font-size: 0.9rem;
            font-style: italic;
            margin-bottom: 15px;
            animation: fadeIn 0.5s ease;
        }

        .fun-tip {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.85rem;
            text-align: center;
            margin-top: 20px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            animation: fadeIn 0.5s ease;
        }

        .option-feedback {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: #1a1a2e;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.85rem;
            z-index: 10;
            animation: feedbackSlide 0.4s ease;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
            white-space: nowrap;
        }

        @keyframes feedbackSlide {
            0% {
                opacity: 0;
                transform: translateY(-50%) translateX(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(-50%) translateX(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes milestonePop {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        .question-text {
            color: #fff;
            font-size: 1.4rem;
            margin-bottom: 40px;
            line-height: 1.6;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 40px;
        }

        .option {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border: 2px solid rgba(255, 255, 255, 0.1);
            padding: 18px 20px;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            color: #e6e6fa;
            font-size: 1rem;
            min-height: 60px;
            display: flex;
            align-items: center;
            width: 100%;
            max-width: 100%;
            position: relative;
            overflow: visible;
        }
        
        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .option:hover {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(255, 215, 0, 0.05) 100%);
            border-color: rgba(255, 215, 0, 0.5);
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.2);
        }
        
        .option:hover::before {
            left: 100%;
        }

        .option.selected {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.25) 0%, rgba(255, 215, 0, 0.1) 100%);
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3), inset 0 0 10px rgba(255, 215, 0, 0.1);
        }

        .option-letter {
            display: inline-block;
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: #1a1a2e;
            border-radius: 50%;
            text-align: center;
            line-height: 36px;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
            box-shadow: 0 2px 10px rgba(255, 215, 0, 0.4);
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .nav-btn {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%);
            border: 2px solid rgba(255, 215, 0, 0.4);
            padding: 14px 40px;
            font-size: 1rem;
            font-weight: bold;
            color: #ffd700;
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            flex: 1;
            position: relative;
            overflow: hidden;
        }
        
        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .nav-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 215, 0, 0.1) 100%);
            border-color: #ffd700;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.3);
        }
        
        .nav-btn:hover:not(:disabled)::before {
            left: 100%;
        }

        .nav-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .nav-btn.primary {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            border-color: transparent;
            color: #1a1a2e;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }

        .nav-btn.primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.6);
        }

        .result-container {
            display: none;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border-radius: 24px;
            padding: 50px 40px;
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 215, 0, 0.3);
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), 0 0 40px rgba(255, 215, 0, 0.1);
        }
        
        .result-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
            pointer-events: none;
        }

        .result-type {
            font-size: 1.5rem;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            letter-spacing: 3px;
            font-weight: bold;
            position: relative;
            z-index: 1;
        }

        .result-character {
            font-size: 3.5rem;
            background: linear-gradient(135deg, #fff 0%, #ffd700 50%, #ff8c00 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
            font-weight: bold;
            position: relative;
            z-index: 1;
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
            animation: characterGlow 3s ease-in-out infinite;
        }
        
        @keyframes characterGlow {
            0%, 100% {
                filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
            }
            50% {
                filter: drop-shadow(0 0 40px rgba(255, 215, 0, 0.8));
            }
        }

        .character-image {
            width: 300px;
            height: 400px;
            object-fit: contain;
            margin: 0 auto 30px;
            border-radius: 15px;
            border: 3px solid #ffd700;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.4);
        }

        .result-score {
            font-size: 1.3rem;
            color: #e6e6fa;
            margin-bottom: 40px;
        }

        .result-score span {
            color: #ffd700;
            font-weight: bold;
            font-size: 1.8rem;
        }

        .personality-analysis {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%);
            border: 2px solid rgba(255, 215, 0, 0.4);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: left;
            line-height: 1.8;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.1), inset 0 0 20px rgba(255, 215, 0, 0.05);
        }
        
        .personality-analysis::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, #ffd700, transparent);
        }

        .personality-analysis-title {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .personality-analysis-text {
            color: #e6e6fa;
            font-size: 1.1rem;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }

        .character-intro {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.03) 100%);
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            text-align: left;
            line-height: 1.8;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .character-intro::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.6), transparent);
        }

        .character-intro-title {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .character-intro-text {
            color: #e6e6fa;
            font-size: 1.1rem;
        }

        .restart-btn {
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            border: none;
            padding: 16px 50px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #1a1a2e;
            cursor: pointer;
            border-radius: 50px;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4),
                        inset 0 2px 4px rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            letter-spacing: 2px;
        }

        .restart-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 215, 0, 0.6),
                        inset 0 2px 4px rgba(255, 255, 255, 0.3);
        }

        .toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(26, 26, 46, 0.95);
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 15px;
            padding: 30px 50px;
            color: #e6e6fa;
            font-size: 1.2rem;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .toast-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            animation: fadeIn 0.3s ease;
        }

        .toast-close {
            margin-top: 20px;
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            border: none;
            padding: 10px 30px;
            font-size: 1rem;
            font-weight: bold;
            color: #1a1a2e;
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
        }

        .toast-close:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 20px 10px;
                overflow-y: auto;
            }

            .container {
                padding: 20px 15px;
            }

            .title {
                font-size: 2rem;
                letter-spacing: 2px;
            }

            .subtitle {
                font-size: 1rem;
                margin-bottom: 40px;
            }

            .start-btn {
                padding: 14px 40px;
                font-size: 1.1rem;
            }

            .quiz-container, .result-container {
                padding: 25px 20px;
            }

            .question-text {
                font-size: 1.2rem;
                margin-bottom: 30px;
            }

            .option {
                padding: 18px 20px;
                font-size: 1rem;
                min-height: 60px;
                display: flex;
                align-items: center;
                width: 100%;
                max-width: 100%;
            }

            .option-letter {
                width: 36px;
                height: 36px;
                line-height: 36px;
                margin-right: 15px;
                flex-shrink: 0;
            }

            .nav-btn {
                padding: 12px 25px;
                font-size: 0.95rem;
            }

            .result-type {
                font-size: 1.2rem;
                letter-spacing: 2px;
            }

            .result-character {
                font-size: 2.5rem;
            }

            .result-score {
                font-size: 1.1rem;
                margin-bottom: 30px;
            }

            .result-score span {
                font-size: 1.5rem;
            }

            .personality-analysis, .character-intro {
                padding: 20px;
                margin-bottom: 25px;
            }

            .personality-analysis-title, .character-intro-title {
                font-size: 1.1rem;
            }

            .personality-analysis-text, .character-intro-text {
                font-size: 1rem;
                line-height: 1.7;
            }

            .toast {
                padding: 25px 30px;
                font-size: 1.1rem;
                width: 85%;
                max-width: 350px;
            }

            .toast-close {
                padding: 8px 25px;
                font-size: 0.95rem;
            }

            .decoration {
                width: 120px;
                height: 120px;
            }

            .decoration:nth-child(1) {
                top: -60px;
                left: -60px;
            }

            .decoration:nth-child(2) {
                bottom: -60px;
                right: -60px;
            }
        }

        @media (max-width: 480px) {
            .title {
                font-size: 1.6rem;
            }

            .result-character {
                font-size: 2rem;
            }

            .option {
                padding: 18px 20px;
                font-size: 1rem;
                min-height: 60px;
                display: flex;
                align-items: center;
                width: 100%;
                max-width: 100%;
            }

            .encouragement-text {
                font-size: 0.8rem;
            }

            .fun-tip {
                font-size: 0.75rem;
                padding: 8px;
                margin-top: 15px;
            }

            .option-feedback {
                font-size: 0.75rem;
                padding: 6px 10px;
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="decoration"></div>
    <div class="decoration"></div>
    
    <div id="toast-overlay" class="toast-overlay" style="display: none;"></div>
    <div id="toast" class="toast" style="display: none;">
        <div id="toast-message"></div>
        <button class="toast-close" onclick="hideToast()">知道了</button>
    </div>
    
    <div class="container">
        <div id="start-screen">
            <h1 class="title">原神性格测试</h1>
            <p class="subtitle">探索你与哪位原神角色最相似</p>
            <button class="start-btn" onclick="startSurvey()">开始测试</button>
        </div>

        <div id="quiz-screen" class="quiz-container">
            <div class="quiz-header">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="question-number" id="question-number"></div>
                <div class="encouragement-text" id="encouragement-text"></div>
            </div>
            <div class="question-text" id="question-text"></div>
            <div class="options" id="options"></div>
            <div class="nav-buttons">
                <button class="nav-btn" id="prev-btn" onclick="prevQuestion()">上一题</button>
                <button class="nav-btn primary" id="next-btn" onclick="nextQuestion()">下一题</button>
            </div>
            <div class="fun-tip" id="fun-tip"></div>
        </div>

        <div id="result-screen" class="result-container">
            <div class="result-type" id="result-type"></div>
            <div class="result-character" id="result-character"></div>

            <div class="personality-analysis" id="personality-analysis"></div>
            <div class="character-intro" id="character-intro"></div>
        </div>
    </div>

    <script>
        const questions = [
            {
                text: "遇到突发问题，你第一反应是？",
                options: [
                    "冷静分析，制定完整方案",
                    "立刻行动，先解决眼前问题",
                    "优先安抚身边人的情绪",
                    "先观察情况，不急于行动"
                ]
            },
            {
                text: "当周围人都慌乱、场面失控时，你更会？",
                options: [
                    "理性梳理问题，给出清晰步骤",
                    "主动站出来控场，快速恢复秩序",
                    "逐一安抚情绪，让大家先平静",
                    "不主动参与，等需要时再出手"
                ]
            },
            {
                text: "你内心最向往的生活是？",
                options: [
                    "规律有序，一切按计划推进",
                    "自由热闹，每天都有新鲜感",
                    "温暖安稳，有重要的人陪伴",
                    "独处自在，不被任何人打扰"
                ]
            },
            {
                text: "朋友向你倾诉烦恼时，你通常？",
                options: [
                    "理性分析，直接给解决方案",
                    "逗他开心，帮他转移注意力",
                    "耐心倾听，温柔共情和安慰",
                    "安静陪伴，不打断也不多说"
                ]
            },
            {
                text: "你做一件重要的事，最在意？",
                options: [
                    "计划是否稳妥、结果是否可控",
                    "过程是否有趣、是否真心热爱",
                    "是否对得起他人、不辜负期待",
                    "是否忠于自己、不让自己勉强"
                ]
            },
            {
                text: "完成重要任务后，你会？",
                options: [
                    "复盘总结，为下次积累经验",
                    "约朋友尽情玩乐放松",
                    "把喜悦分享给在意的人",
                    "独自安静，慢慢平复心情"
                ]
            },
            {
                text: "面对你不认同的规则，你会？",
                options: [
                    "在规则内找合理方式规避",
                    "公开表达不满，要求修改",
                    "为了不惹麻烦，选择遵守",
                    "直接无视，按自己方式做"
                ]
            },
            {
                text: "朋友难过但不想说话时，你会？",
                options: [
                    "等他愿意说时再给出建议",
                    "带他出门散心，用快乐冲淡情绪",
                    "安静陪着，不催促也不追问",
                    "保持距离，给他足够空间"
                ]
            },
            {
                text: "你的整体性格更接近？",
                options: [
                    "外表冷静、内心有温度，偏理性",
                    "情绪直白、热情外放，不藏着掖着",
                    "内心柔软、容易共情，优先照顾人",
                    "习惯独处、不爱社交，独立冷淡"
                ]
            },
            {
                text: "学习新技能时，你会？",
                options: [
                    "先学理论，打好基础再动手",
                    "直接实操，在试错中快速掌握",
                    "找人带领，一步步慢慢学",
                    "独自摸索，不喜欢被人指点"
                ]
            },
            {
                text: "被他人误解、冤枉时，你会？",
                options: [
                    "用事实和逻辑证明自己",
                    "当场反驳，清楚表达立场",
                    "默默委屈，希望被人理解",
                    "懒得解释，懂的人自然信你"
                ]
            },
            {
                text: "你最在意别人对你的评价是？",
                options: [
                    "可靠、有能力、能扛事",
                    "有趣、讲义气、好相处",
                    "温柔、体贴、会照顾人",
                    "独立、有主见、不迎合"
                ]
            },
            {
                text: "明显不合理的规则影响很多人，你会？",
                options: [
                    "理性提出优化，不硬碰硬",
                    "带头表达不满，敢于反抗",
                    "心里不认同，但依旧顺从",
                    "按自己的原则做，不受约束"
                ]
            },
            {
                text: "压力大到崩溃边缘，你会？",
                options: [
                    "强迫自己冷静，独自硬扛",
                    "尽情发泄，把情绪释放出来",
                    "变得脆弱，非常需要安慰",
                    "彻底放空，让情绪自然恢复"
                ]
            },
            {
                text: "你更喜欢的社交方式是？",
                options: [
                    "小范围深度聊天",
                    "热闹的多人聚会",
                    "一对一真诚谈心",
                    "尽量不参与社交"
                ]
            },
            {
                text: "做重大选择时，你优先考虑？",
                options: [
                    "利弊得失与长远规划",
                    "自己的喜好与快乐",
                    "不伤害家人朋友的感受",
                    "忠于内心，不勉强自己"
                ]
            },
            {
                text: "一段关系里，你最不能接受？",
                options: [
                    "不讲逻辑、反复无常、没安全感",
                    "沉闷压抑、毫无热情、很无趣",
                    "冷漠自私、从不顾及你的付出",
                    "控制欲强、干涉你的所有选择"
                ]
            },
            {
                text: "你对 \"承诺\" 的态度是？",
                options: [
                    "一旦答应，必定做到",
                    "尽力完成，但不勉强自己",
                    "害怕做不到，很少许诺",
                    "觉得承诺束缚人，不在意"
                ]
            },
            {
                text: "付出很多却被否定时，你会？",
                options: [
                    "用结果证明，不情绪化",
                    "直接说清楚，不接受委屈",
                    "难过疲惫，寄希望于时间",
                    "无所谓，懒得向人证明"
                ]
            },
            {
                text: "团队合作中，你更像？",
                options: [
                    "制定方案的决策者",
                    "带头干活的执行者",
                    "安抚情绪的调和者",
                    "按需出力的旁观者"
                ]
            },
            {
                text: "看到不公平的事发生，你会？",
                options: [
                    "理性取证，用合理方式维权",
                    "立刻站出，为弱者发声",
                    "默默同情，悄悄提供帮助",
                    "不想卷入，假装没看见"
                ]
            },
            {
                text: "你对未来的真实期待是？",
                options: [
                    "变强变稳，能保护想保护的人",
                    "体验丰富，活得热烈不留遗憾",
                    "家人平安，拥有长久温暖",
                    "内心安宁，不被世俗绑架"
                ]
            },
            {
                text: "你最想成为别人眼中？",
                options: [
                    "靠谱、理智、可托付的人",
                    "阳光、真诚、带来快乐的人",
                    "温柔、善良、让人安心的人",
                    "清醒、独立、不随波逐流的人"
                ]
            },
            {
                text: "你更像哪种动物？",
                options: [
                    "猎豹：冷静专注、目标明确",
                    "雄狮：热情坦荡、气场强",
                    "小鹿：温和柔软、易受惊",
                    "孤狐：神秘独立、不喜靠近"
                ]
            },
            {
                text: "看到有人被欺负却无人帮忙，你会？",
                options: [
                    "冷静判断，用最安全的方式帮忙",
                    "毫不犹豫，直接上前制止",
                    "心里同情，会私下提供帮助",
                    "避免冲突，只在心里支持正义"
                ]
            },
            {
                text: "面对批评，你会？",
                options: [
                    "理性吸收，有则改之",
                    "不服气，会为自己辩解",
                    "默默难过，但悄悄改正",
                    "不太在意，坚持自己"
                ]
            },
            {
                text: "你做决定最容易被什么影响？",
                options: [
                    "风险、收益、长远结果",
                    "兴趣、冲动、当下热情",
                    "良心、情感、他人感受",
                    "舒适感、自由、不勉强"
                ]
            },
            {
                text: "你做事的动力来源是？",
                options: [
                    "责任、目标、自我提升",
                    "热爱、兴趣、新鲜感",
                    "被需要、被认可、被在乎",
                    "内心平静、自由自在"
                ]
            },
            {
                text: "你心中真正的安全感来自？",
                options: [
                    "自己能力强、计划足够稳",
                    "有人支持、有人陪伴",
                    "被珍惜、被理解、不被抛弃",
                    "不依赖任何人，自己足够独立"
                ]
            },
            {
                text: "和陌生人相处，你会？",
                options: [
                    "礼貌客气，保持距离",
                    "主动热情，很快熟络",
                    "温柔害羞，被动回应",
                    "冷淡沉默，不主动交流"
                ]
            },
            {
                text: "你最看重一段关系里的？",
                options: [
                    "信任、尊重、讲道理",
                    "轻松、有趣、合得来",
                    "包容、陪伴、情绪稳定",
                    "自由、独立、互不干涉"
                ]
            },
            {
                text: "面对失败，你会？",
                options: [
                    "复盘原因，重新再来",
                    "不服输，立刻再次尝试",
                    "情绪低落，需要鼓励",
                    "淡然接受，顺其自然"
                ]
            },
            {
                text: "你更像哪一种花？",
                options: [
                    "牡丹：端庄稳重、有气场",
                    "向日葵：阳光热烈、有活力",
                    "樱花：温柔细腻、纯净",
                    "彼岸花：清冷疏离、独特"
                ]
            },
            {
                text: "你理解的正义是？",
                options: [
                    "按规则办事，公平公正",
                    "保护弱者，敢于出头",
                    "温柔体谅，化解矛盾",
                    "不干涉他人，各自安好"
                ]
            },
            {
                text: "你难过到不想说话时，希望别人？",
                options: [
                    "给你空间，等你自己恢复",
                    "拉你出门，转移心情",
                    "轻轻陪着，不说大道理",
                    "完全不打扰，让你独处"
                ]
            },
            {
                text: "空闲时间你一般会？",
                options: [
                    "看书学习，提升自己",
                    "出门玩乐，放松心情",
                    "陪伴家人，照顾他人",
                    "发呆独处，放空自己"
                ]
            },
            {
                text: "你最讨厌的性格是？",
                options: [
                    "愚蠢冲动、毫无逻辑",
                    "消极沉闷、毫无活力",
                    "自私自利、毫无同理心",
                    "控制欲强、毫无边界"
                ]
            },
            {
                text: "你做决定的速度？",
                options: [
                    "慢，但精准稳妥",
                    "快，但灵活会调整",
                    "慢，容易犹豫纠结",
                    "快，非常随心所欲"
                ]
            },
            {
                text: "你眼中最美的气质是？",
                options: [
                    "秩序感、理性、稳重",
                    "生命力、热烈、阳光",
                    "温柔感、治愈、柔软",
                    "疏离感、独立、淡然"
                ]
            },
            {
                text: "遇到喜欢的人，你会？",
                options: [
                    "观察很久，确认后再行动",
                    "大胆主动，直接表达心意",
                    "默默付出，温柔靠近",
                    "保持距离，不敢轻易接近"
                ]
            },
            {
                text: "你更喜欢一天中的哪个时段？",
                options: [
                    "上午：清醒高效",
                    "下午：活力轻松",
                    "傍晚：温柔治愈",
                    "深夜：安静独处"
                ]
            },
            {
                text: "你对金钱财富的态度是？",
                options: [
                    "理性规划，合理消费",
                    "喜欢就买，及时行乐",
                    "优先给家人花，舍得付出",
                    "够用就行，不太在意"
                ]
            },
            {
                text: "你更擅长记住？",
                options: [
                    "逻辑、规则、关键细节",
                    "有趣瞬间、快乐回忆",
                    "他人情绪、喜好与软肋",
                    "自己的感受、小坚持"
                ]
            },
            {
                text: "面对挑战，你会？",
                options: [
                    "准备充分再开始",
                    "兴奋迎接，直接冲",
                    "有点害怕，但会尝试",
                    "无所谓，接受任何结果"
                ]
            },
            {
                text: "你更像哪一种饮品？",
                options: [
                    "浓茶：沉静、有深度",
                    "汽水：热烈、有活力",
                    "奶茶：温柔、治愈",
                    "清水：简单、淡然"
                ]
            },
            {
                text: "你对家庭的看法是？",
                options: [
                    "责任担当，必须守护",
                    "快乐源泉，轻松打闹",
                    "温暖港湾，治愈一切",
                    "独立就行，不必依赖"
                ]
            },
            {
                text: "你更在意生活的？",
                options: [
                    "效率、成果、成长",
                    "快乐、体验、热情",
                    "情感、陪伴、温暖",
                    "自由、舒适、自我"
                ]
            },
            {
                text: "当你犯错后，会？",
                options: [
                    "主动承担，立刻改正",
                    "大方道歉，翻篇向前",
                    "内心愧疚，尽力弥补",
                    "默默改正，不声张"
                ]
            },
            {
                text: "你更向往哪个国家氛围？",
                options: [
                    "璃月：稳重、秩序、传统",
                    "蒙德：自由、热烈、洒脱",
                    "稻妻：温柔、细腻、坚守",
                    "须弥：理性、独立、思考"
                ]
            },
            {
                text: "你更像哪种音乐？",
                options: [
                    "古典乐：严谨、理性",
                    "摇滚乐：奔放、热烈",
                    "轻音乐：温柔、治愈",
                    "纯音乐：安静、独立"
                ]
            },
            {
                text: "你对时间的态度是？",
                options: [
                    "珍惜规划，高效利用",
                    "享受当下，活在现在",
                    "害怕浪费，总在追赶",
                    "随意节奏，顺其自然"
                ]
            },
            {
                text: "你最想拥有的超能力是？",
                options: [
                    "掌控全局、运筹帷幄",
                    "无所畏惧、勇往直前",
                    "治愈他人、传递温暖",
                    "内心淡然、不受困扰"
                ]
            },
            {
                text: "别人请你帮忙，你会？",
                options: [
                    "先评估能力，再决定是否帮",
                    "爽快答应，尽全力去帮",
                    "不好意思拒绝，多半会帮",
                    "看心情，不想帮就拒绝"
                ]
            },
            {
                text: "你更愿意把时间花在？",
                options: [
                    "自我提升、实现目标",
                    "玩乐体验、探索新鲜",
                    "陪伴亲友、维护关系",
                    "独处放空、回归自己"
                ]
            },
            {
                text: "看到别人吵架，你会？",
                options: [
                    "理性分析谁对谁错",
                    "主动上前劝和",
                    "害怕紧张，想躲开",
                    "不参与，保持旁观"
                ]
            },
            {
                text: "你最欣赏的人类品质是？",
                options: [
                    "清醒自律、理性稳重",
                    "勇敢真诚、热烈坦荡",
                    "善良温柔、共情力强",
                    "淡然通透、自在随心"
                ]
            },
            {
                text: "你做事的习惯是？",
                options: [
                    "先定计划，再一步步执行",
                    "边做边改，灵活调整",
                    "缓慢稳重，不出错就行",
                    "随心所欲，不受约束"
                ]
            },
            {
                text: "你最不舒服的相处模式是？",
                options: [
                    "不讲逻辑、胡搅蛮缠",
                    "压抑无聊、毫无乐趣",
                    "冷漠伤害、互相消耗",
                    "控制束缚、失去自我"
                ]
            },
            {
                text: "你对朋友圈的态度是？",
                options: [
                    "重质不重量，精英小圈",
                    "喜欢热闹，朋友很多",
                    "真心对待每一段关系",
                    "合则来不合则去，不强求"
                ]
            },
            {
                text: "到一个全新环境，你会？",
                options: [
                    "先观察规则，再融入",
                    "快速适应，主动社交",
                    "慢慢试探，缓慢融入",
                    "保持自我，不刻意迎合"
                ]
            },
            {
                text: "你内心更相信？",
                options: [
                    "实力、规则、理性",
                    "热情、勇气、直觉",
                    "真心、陪伴、情感",
                    "随缘、自在、心境"
                ]
            },
            {
                text: "你最反感的行为是？",
                options: [
                    "固执无知、不讲道理",
                    "虚伪懦弱、不敢担当",
                    "自私冷漠、毫无良心",
                    "控制欲强、侵犯边界"
                ]
            },
            {
                text: "你的说话风格更接近？",
                options: [
                    "简洁直接、只讲重点",
                    "活泼有趣、爱开玩笑",
                    "温和柔软、照顾情绪",
                    "清淡话少、点到为止"
                ]
            },
            {
                text: "你对待秘密的方式是？",
                options: [
                    "严格保守，绝不外传",
                    "只告诉最信任的人",
                    "容易心软，被打动就说",
                    "不藏秘密，也不在意"
                ]
            },
            {
                text: "当生活发生巨大改变，你会？",
                options: [
                    "理性接受，顺势调整",
                    "期待新鲜，乐于尝试",
                    "不安焦虑，慢慢适应",
                    "无所谓，怎样都可以"
                ]
            },
            {
                text: "别人求助时，你第一反应是？",
                options: [
                    "该不该帮、我能不能帮",
                    "讲义气，能帮就帮",
                    "不忍心拒绝，会答应",
                    "我想不想帮，不勉强"
                ]
            },
            {
                text: "你更想成为什么样的人？",
                options: [
                    "强大可靠、清醒自律",
                    "快乐自由、勇敢热烈",
                    "温柔善良、被人需要",
                    "内心安宁、随性自在"
                ]
            },
            {
                text: "你心中完美的一天是？",
                options: [
                    "高效充实、完成目标",
                    "轻松有趣、无忧无虑",
                    "温暖陪伴、安心治愈",
                    "安静自在、不被打扰"
                ]
            },
            {
                text: "你更看重自己的？",
                options: [
                    "能力与价值",
                    "快乐与热爱",
                    "温柔与安全感",
                    "自由与舒心"
                ]
            },
            {
                text: "如果对自己说一句话，你会选？",
                options: [
                    "继续变强，保持清醒",
                    "永远热烈，永远自由",
                    "温柔一点，也要爱自己",
                    "随心而行，不必强求"
                ]
            }
        ];

        function getCharacter(score) {
            if (score >= 70 && score <= 79) return { type: "理智稳重型", character: "钟离" };
            if (score >= 80 && score <= 88) return { type: "理智稳重型", character: "艾尔海森" };
            if (score >= 89 && score <= 97) return { type: "理智稳重型", character: "那维莱特" };
            if (score >= 98 && score <= 105) return { type: "理智稳重型", character: "刻晴" };
            if (score >= 106 && score <= 112) return { type: "理智稳重型", character: "夜兰"};
            if (score >= 113 && score <= 119) return { type: "理智稳重型", character: "琴" };
            if (score >= 120 && score <= 125) return { type: "理智稳重型", character: "阿贝多" };
            if (score >= 126 && score <= 129) return { type: "理智稳重型", character: "凝光" };
            
            if (score >= 130 && score <= 139) return { type: "阳光热血型", character: "胡桃" };
            if (score >= 140 && score <= 148) return { type: "阳光热血型", character: "荒泷一斗" };
            if (score >= 149 && score <= 156) return { type: "阳光热血型", character: "宵宫" };
            if (score >= 157 && score <= 163) return { type: "阳光热血型", character: "达达利亚" };
            if (score >= 164 && score <= 169) return { type: "阳光热血型", character: "安柏" };
            if (score >= 170 && score <= 174) return { type: "阳光热血型", character: "香菱" };	
            if (score >= 175 && score <= 177) return { type: "阳光热血型", character: "迪卢克" };
            if (score >= 178 && score <= 179) return { type: "阳光热血型", character: "枫原万叶" };
            
            if (score >= 180 && score <= 188) return { type: "温柔治愈型", character: "神里绫华" };
            if (score >= 189 && score <= 196) return { type: "温柔治愈型", character: "甘雨" };
            if (score >= 197 && score <= 204) return { type: "温柔治愈型", character: "纳西妲" };
            if (score >= 205 && score <= 211) return { type: "温柔治愈型", character: "芭芭拉" };	
            if (score >= 212 && score <= 217) return { type: "温柔治愈型", character: "瑶瑶" };
            if (score >= 218 && score <= 222) return { type: "温柔治愈型", character: "行秋" };
            if (score >= 223 && score <= 226) return { type: "温柔治愈型", character: "重云" };
            if (score >= 227 && score <= 229) return { type: "温柔治愈型", character: "芙宁娜" };
            
            if (score >= 230 && score <= 239) return { type: "清冷独立型", character: "魈" };
            if (score >= 240 && score <= 248) return { type: "清冷独立型", character: "枫原万叶" };
            if (score >= 249 && score <= 256) return { type: "清冷独立型", character: "雷电将军" };
            if (score >= 257 && score <= 264) return { type: "清冷独立型", character: "八重神子" };
            if (score >= 265 && score <= 270) return { type: "清冷独立型", character: "琳妮特" };
            if (score >= 271 && score <= 274) return { type: "清冷独立型", character: "菲谢尔" };
            if (score >= 275 && score <= 277) return { type: "清冷独立型", character: "罗莎莉亚" };
            if (score >= 278 && score <= 280) return { type: "清冷独立型", character: "莫娜" };
            
            return { type: "未知", character: "未知", image: "" };
        }

        let currentQuestion = 0;
        let answers = {};

        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = (Math.random() * 5 + 5) + 's';
                container.appendChild(particle);
            }
        }

        function startSurvey() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'block';
            lastMilestone = 0; // 重置里程碑记录
            showQuestion();
        }

        const encouragements = [
            "相信自己的直觉，旅行者！",
            "每个选择都代表着真实的你~",
            "继续探索内心的世界吧！",
            "你的性格正在逐渐显现...",
            "跟着心走，答案就在那里！",
            "每一次选择都是自我发现！",
            "保持真实，做最好的自己！",
            "冒险的旅程还在继续！",
            "你的独特之处正在发光！",
            "相信自己，你比想象中更强大！"
        ];

        const funTips = [
            "💡 小知识：提瓦特大陆有七个国家，每个国家都有独特的文化和风景！",
            "💡 小知识：元素之力是提瓦特世界的核心，七种元素相互制约又相互融合！",
            "💡 小知识：神之眼是神明赐予的宝物，代表着持有者的愿望和意志！",
            "💡 小知识：每个角色都有自己的故事和背景，等待着你去发现！",
            "💡 小知识：旅行者，你的选择将决定你在提瓦特的命运！",
            "💡 小知识：不同的性格类型对应着不同的元素亲和度哦！",
            "💡 小知识：在提瓦特，每个灵魂都是独一无二的星辰！",
            "💡 小知识：你的性格特质可能与某位角色的元素属性相似！",
            "💡 小知识：冒险家协会欢迎所有类型的旅行者加入！",
            "💡 小知识：在蒙德，自由是最重要的品质；在璃月，契约是永恒的信仰！"
        ];

        const optionFeedbacks = [
            "不错的选择！",
            "很有见地！",
            "这个答案很有趣！",
            "深思熟虑的决定！",
            "独特的视角！",
            "充满智慧的选择！"
        ];

        function showQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('question-number').textContent = `第 ${currentQuestion + 1}/${questions.length} 题`;
            document.getElementById('question-text').textContent = q.text;
            
            // 显示鼓励语句
            const encouragementText = document.getElementById('encouragement-text');
            encouragementText.textContent = encouragements[currentQuestion % encouragements.length];
            
            // 显示趣味提示
            const funTip = document.getElementById('fun-tip');
            funTip.textContent = funTips[currentQuestion % funTips.length];
            
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            const letters = ['A', 'B', 'C', 'D'];
            q.options.forEach((opt, idx) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                if (answers[currentQuestion] === idx) {
                    optionDiv.classList.add('selected');
                }
                optionDiv.innerHTML = `<span class="option-letter">${letters[idx]}</span>${opt}`;
                optionDiv.onclick = () => selectOption(idx);
                optionsContainer.appendChild(optionDiv);
            });

            updateProgress();
            updateButtons();
        }

        function selectOption(idx) {
            answers[currentQuestion] = idx;
            const options = document.querySelectorAll('.option');
            options.forEach((opt, i) => {
                opt.classList.toggle('selected', i === idx);
            });
            
            // 显示答题反馈
            showOptionFeedback(idx);
            
            // 添加选中动画效果
            options[idx].style.transform = 'scale(0.98)';
            setTimeout(() => {
                options[idx].style.transform = '';
            }, 150);
        }
        
        function showOptionFeedback(selectedIdx) {
            // 移除之前的反馈
            const existingFeedback = document.querySelectorAll('.option-feedback');
            existingFeedback.forEach(el => el.remove());
            
            // 获取选中的选项元素
            const options = document.querySelectorAll('.option');
            const selectedOption = options[selectedIdx];
            if (!selectedOption) return;
            
            // 创建新的反馈，显示在选中的选项内部
            const feedback = document.createElement('div');
            feedback.className = 'option-feedback';
            feedback.textContent = optionFeedbacks[Math.floor(Math.random() * optionFeedbacks.length)];
            selectedOption.appendChild(feedback);
            
            // 1.5秒后移除反馈
            setTimeout(() => {
                if (feedback.parentNode) {
                    feedback.style.opacity = '0';
                    feedback.style.transition = 'opacity 0.3s ease';
                    setTimeout(() => feedback.remove(), 300);
                }
            }, 1500);
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function showToast(message) {
            document.getElementById('toast-message').textContent = message;
            document.getElementById('toast-overlay').style.display = 'block';
            document.getElementById('toast').style.display = 'block';
        }

        function hideToast() {
            document.getElementById('toast-overlay').style.display = 'none';
            document.getElementById('toast').style.display = 'none';
        }

        function nextQuestion() {
            if (answers[currentQuestion] === undefined) {
                showToast('请选择一个选项后再继续！');
                return;
            }
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                finishSurvey();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';
            
            // 进度里程碑提示
            const milestones = [25, 50, 75, 100];
            const milestoneMessages = {
                25: "🎉 已完成25%！继续加油，旅行者！",
                50: "🎉 已经完成一半了！你的性格画像越来越清晰了！",
                75: "🎉 75%完成！再坚持一下就能看到结果了！",
                100: "🎉 全部完成！准备揭晓你的原神角色吧！"
            };
            
            const currentProgress = Math.round(progress);
            if (milestones.includes(currentProgress) && currentProgress > 0) {
                showMilestoneToast(milestoneMessages[currentProgress]);
            }
        }
        
        let lastMilestone = 0;
        function showMilestoneToast(message) {
            const progress = Math.round(((currentQuestion + 1) / questions.length) * 100);
            if (progress === lastMilestone) return;
            lastMilestone = progress;
            
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, rgba(255, 215, 0, 0.95), rgba(255, 140, 0, 0.95));
                color: #1a1a2e;
                padding: 20px 40px;
                border-radius: 15px;
                font-weight: bold;
                font-size: 1.2rem;
                z-index: 2000;
                animation: milestonePop 0.5s ease;
                box-shadow: 0 15px 40px rgba(255, 215, 0, 0.5);
                text-align: center;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'fadeIn 0.3s ease reverse';
                setTimeout(() => toast.remove(), 300);
            }, 2500);
        }

        function updateButtons() {
            document.getElementById('prev-btn').disabled = currentQuestion === 0;
            const nextBtn = document.getElementById('next-btn');
            if (currentQuestion === questions.length - 1) {
                nextBtn.textContent = '完成测试';
            } else {
                nextBtn.textContent = '下一题';
            }
        }

        const characterIntros = {
            "钟离": "岩神摩拉克斯，璃月港的创建者。看似是往生堂的客卿，实则执掌璃月千年。性格沉稳持重，凡事讲求章法与契约，是值得信赖的可靠之人。",
            "艾尔海森": "教令院的书记官，同时也是须弥最顶尖的学者之一。外表冷淡疏离，实则心思缜密，有着自己独特的行事准则。",
            "那维莱特": "枫丹的最高审判官，水之龙的化身。外表威严，内心却对人类有着深厚的关怀。他以公正不阿的态度维护着枫丹的秩序。",
            "刻晴": "璃月七星中的玉衡星，是一位实干派的领导者。性格严谨认真，对工作一丝不苟，始终用行动证明着自己的能力。",
            "夜兰": "璃月港的神秘人物，表面上是岩上茶室的老板，实则承担着特殊的使命。她精明干练，善于在暗中掌控局势。",
            "琴": "西风骑士团的代理团长，蒙德的守护者之一。她认真负责，温柔善良，始终将蒙德的安危放在首位，是值得信赖的领导者。",
            "阿贝多": "西风骑士团的首席炼金术士，被誉为天才。他性格冷静内敛，专注于研究和创造，对世间万物都充满着求知欲。",
            "凝光": "璃月七星中的天权星，群玉阁的主人。她精明睿智，善于谋略，将璃月的商业打理得井井有条，是一位极具魅力的女性。",
            "胡桃": "往生堂第七十七代堂主，性格活泼开朗，古灵精怪。她看似玩世不恭，实则对生死有着深刻的理解，是一位非常有魅力的少女。",
            "荒泷一斗": "荒泷派的老大，性格豪爽直率，充满正义感。他虽然有时看起来有些鲁莽，但实际上非常重视友情，是值得信赖的伙伴。",
            "宵宫": "长野原烟花店的店主，被誉为夏日祭典的女王。她热情开朗，技艺精湛，用绚丽的烟花为人们带来欢乐和希望。",
            "达达利亚": "愚人众十一执行官末席，代号公子。他性格好战，喜欢挑战强者，但同时也非常重视家人，是一个复杂而迷人的角色。",
            "安柏": "西风骑士团的侦察骑士，性格活泼开朗，充满活力。她热爱自由，喜欢冒险，是蒙德最优秀的侦察骑士之一。",
            "香菱": "万民堂的小厨娘，对烹饪有着无比的热情。她性格开朗乐观，勇于尝试各种食材，梦想是做出世界上最美味的菜肴。",
            "迪卢克": "晨曦酒庄的庄主，曾经的西风骑士团骑兵队长。他性格沉稳内敛，行事果断，以独特的方式守护着蒙德的安宁。表面冷峻，实则心怀正义，是一位值得信赖的守护者。",
            "枫原万叶": "来自稻妻的浪人武士，性格温和洒脱。他热爱自然，喜欢诗歌，有着独特的审美观和人生态度。",
            "神里绫华": "神里家的大小姐，稻妻三奉行之一。她外表端庄优雅，内心却温柔善良，一直默默守护着稻妻的人民。",
            "甘雨": "璃月七星的秘书，半仙之身。她性格温和，工作认真负责，数千年来一直默默陪伴着璃月的成长。",
            "纳西妲": "须弥的草神，智慧之神。虽然外表年幼，但却拥有着超越常人的智慧和慈悲心，是一位非常值得尊敬的神明。",
            "芭芭拉": "西风教会的祈礼牧师，同时也是蒙德的偶像。她性格温柔善良，用歌声治愈人们的心灵，是蒙德最受欢迎的少女之一。",
            "瑶瑶": "璃月港的可爱少女，香菱的小师妹。她天真烂漫，温柔善良，总是用自己的方式关心着身边的每一个人。",
            "芙宁娜": "枫丹的水神，曾经的芙卡洛斯。她外表高傲，内心却柔软善良，为了枫丹的人民做出了巨大的牺牲。",
            "魈": "璃月的三眼五显仙人，夜叉之一。他外表冷峻，内心却温柔，数千年一直默默守护着璃月，是一位令人敬佩的存在。",
            "雷电将军": "稻妻的雷神，永恒的守护者。她性格威严，为了追求永恒而实行锁国，但在与旅行者相遇后逐渐改变了想法。",
            "八重神子": "鸣神大社的宫司，雷电将军的眷属。她外表妩媚，内心狡黠，是一位非常有魅力和智慧的女性。",
            "琳妮特": "枫丹的魔术师助手，菲米尼的姐姐。她性格冷静，寡言少语，但实际上非常关心家人，是一位可靠的伙伴。",
            "菲谢尔": "自称断罪之皇女的少女，性格有些中二。她虽然外表傲娇，但内心善良，与奥兹有着深厚的羁绊。",
            "罗莎莉亚": "西风教会的修女，性格冷淡疏离。她虽然表面上对什么都不关心，但实际上一直在用自己的方式守护着蒙德。",
            "莫娜": "占星术士，自称阿斯托洛吉斯·莫娜·梅姬斯图斯。她虽然生活清贫，但对占星术有着极高的造诣，是一位非常有个性的少女。",
            "提纳里": "须弥道成林的巡林官，也是柯莱的师父。他性格沉稳，知识渊博，对植物学有着深入的研究，是一位值得信赖的学者。",
            "赛诺": "须弥的大风纪官，以公正严明著称。他性格认真，对规则有着严格的遵守，虽然有时显得过于严肃，但内心充满正义感。",
            "班尼特": "蒙德冒险家协会的成员，被称为'倒霉蛋'。他性格乐观开朗，永不放弃，即使总是遭遇不幸，依然保持着积极向上的心态。",
            "托马": "神里家的家政官，来自蒙德。他性格热情开朗，善于交际，在稻妻有着广泛的人脉，是一位非常可靠的伙伴。",
            "辛焱": "璃月的摇滚乐手，以热烈的演出风格闻名。她性格豪爽直率，热爱音乐，用摇滚表达着自己的态度和热情。",
            "云堇": "璃月戏曲名角，以精湛的表演技艺闻名。她性格温和有礼，对传统文化有着深厚的热爱，是璃月文化的传承者。",
            "雷泽": "生活在奔狼领的少年，与狼群一同成长。他性格单纯直接，虽然不善言辞，但对朋友非常忠诚，有着野兽般的直觉。",
            "珊瑚宫心海": "海祇岛的现人神巫女，珊瑚宫家的家主。她性格温柔智慧，善于谋略，以独特的方式守护着海祇岛的人民。",
            "诺艾尔": "西风骑士团的女仆，梦想成为正式的骑士。她性格温柔勤劳，总是默默地为他人付出，是蒙德最受信赖的人之一。",
            "七七": "不卜庐的采药姑娘，僵尸之身。她性格单纯可爱，虽然记忆力不好，但总是认真地完成每一件事，让人忍不住想要保护。",
            "早柚": "终末番的忍者，隶属于社奉行。她性格慵懒，喜欢睡觉和偷懒，但在关键时刻却能展现出优秀的忍者能力。",
            "米卡": "西风骑士团的前进测绘员，游击小队成员。他性格内向害羞，但在测绘和记录方面有着出色的才能，是一位可靠的伙伴。",
            "申鹤": "留云借风真君的弟子，出身于驱邪世家。她性格清冷疏离，不谙世事，但内心单纯善良，一直在学习如何与人相处。",
            "流浪者": "曾经的愚人众第六席散兵，现以流浪者的身份游历世间。他性格孤傲，有着复杂的过去，但正在寻找属于自己的人生道路。",
            "莱依拉": "梨多梵谛学院的学生，专攻理论星相学。她性格内向害羞，容易失眠，但在学术上有着极高的天赋和造诣。"
        };

        const personalityAnalyses = {
            "理智稳重型": "你是一个理性、稳重、值得信赖的人。你做事有条理，善于分析和规划，凡事讲求逻辑和原则。在团队中，你往往是那个能稳住大局、做出正确决策的人。你追求效率和成果，对自己和他人都有较高的要求，但同时也懂得尊重规则和他人的感受。",
            "阳光热血型": "你是一个热情、开朗、充满活力的人。你热爱生活，喜欢冒险和挑战，总是能给周围的人带来快乐和正能量。你重情义、讲义气，对朋友真诚坦率，愿意为了在意的人挺身而出。你追求自由和快乐，相信活在当下，享受每一个精彩的瞬间。",
            "温柔治愈型": "你是一个善良、温柔、富有同理心的人。你敏感细腻，善于察觉他人的情绪变化，总是能在别人需要的时候给予温暖和安慰。你重视家庭和友情，愿意为了所爱的人付出，是一个非常好的倾听者和陪伴者。你追求和谐和安稳，相信温柔的力量能够化解一切。",
            "清冷独立型": "你是一个独立、清醒、有主见的人。你喜欢独处，享受内心的宁静，不喜欢被世俗的规则和他人的看法所束缚。你有自己独特的价值观和生活方式，虽然外表看起来有些疏离，但内心其实有着自己的坚持和温柔。你追求自由和真实，相信只有忠于自己才能获得真正的平静。"
        };

        const charactersByType = {
            "理智稳重型": ["钟离", "艾尔海森", "那维莱特", "刻晴", "夜兰", "琴", "阿贝多", "凝光", "迪卢克", "提纳里", "赛诺"],
            "阳光热血型": ["胡桃", "荒泷一斗", "宵宫", "达达利亚", "安柏", "香菱", "班尼特", "托马", "辛焱", "云堇", "雷泽"],
            "温柔治愈型": ["神里绫华", "甘雨", "纳西妲", "芭芭拉", "瑶瑶", "芙宁娜", "珊瑚宫心海", "诺艾尔", "七七", "早柚", "米卡"],
            "清冷独立型": ["魈", "枫原万叶", "雷电将军", "八重神子", "琳妮特", "菲谢尔", "罗莎莉亚", "莫娜", "申鹤", "流浪者", "莱依拉"]
        };

        const typeMapping = {
            0: "理智稳重型",
            1: "阳光热血型",
            2: "温柔治愈型",
            3: "清冷独立型"
        };

        function finishSurvey() {
            const optionCounts = [0, 0, 0, 0];
            
            for (let i = 0; i < questions.length; i++) {
                if (answers[i] !== undefined) {
                    optionCounts[answers[i]]++;
                }
            }
            
            let maxCount = -1;
            let maxIndex = 0;
            for (let i = 0; i < optionCounts.length; i++) {
                if (optionCounts[i] > maxCount) {
                    maxCount = optionCounts[i];
                    maxIndex = i;
                }
            }
            
            const type = typeMapping[maxIndex];
            const characters = charactersByType[type];
            const randomIndex = Math.floor(Math.random() * characters.length);
            const character = characters[randomIndex];
            
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            document.getElementById('result-type').textContent = type;
            document.getElementById('result-character').textContent = character;
            
            const analysisDiv = document.getElementById('personality-analysis');
            const analysis = personalityAnalyses[type] || "暂无分析";
            analysisDiv.innerHTML = `
                <div class="personality-analysis-title">你的性格分析</div>
                <div class="personality-analysis-text">${analysis}</div>
            `;
            
            const introDiv = document.getElementById('character-intro');
            const intro = characterIntros[character] || "暂无介绍";
            introDiv.innerHTML = `
                <div class="character-intro-title">角色介绍</div>
                <div class="character-intro-text">${intro}</div>
            `;
        }

        function restartSurvey() {
            currentQuestion = 0;
            answers = {};
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('start-screen').style.display = 'block';
        }

        createParticles();


        // 隐藏移动设备浏览器地址栏
        function hideAddressBar() {
            // 检查是否为移动设备
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                // 确保页面有足够的高度
                document.body.style.minHeight = '105vh';
                
                // 延迟执行滚动，确保DOM已完全加载
                setTimeout(() => {
                    // 滚动1像素以触发地址栏隐藏
                    window.scrollTo(0, 1);
                    
                    // 恢复正常的最小高度
                    setTimeout(() => {
                        document.body.style.minHeight = '100vh';
                    }, 100);
                }, 100);
            }
        }

        // 页面加载时隐藏地址栏
        window.addEventListener('load', hideAddressBar);
        
        // 页面调整大小时（如旋转设备）也尝试隐藏地址栏
        window.addEventListener('resize', hideAddressBar);
    </script>
</body>
</html>
